<!DOCTYPE html>
<html>
  <head>
    <meta charset="utf-8">
    <title>WebVR Video See-Through</title>
    <script src="https://aframe.io/releases/1.4.2/aframe.min.js"></script>
  </head>
  <body style="margin: 0; overflow: hidden;">

    <a-scene>
      <a-assets>
        <video id="webcam" autoplay playsinline></video>
      </a-assets>

      <a-videosphere src="#webcam" rotation="0 -90 0"></a-videosphere>

      <a-box position="0 1.5 -3" material="color: red; opacity: 0.8" 
             animation="property: rotation; to: 0 360 0; loop: true; dur: 5000">
      </a-box>

      <a-text value="VR + AR Mode" position="-1 2 -2" color="white"></a-text>

      <a-entity camera look-controls></a-entity>
    </a-scene>

    <script>
      // Скрипт для запроса доступа к задней камере
      const video = document.querySelector('#webcam');

      if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
        const constraints = {
          video: {
            facingMode: 'environment' // Используем именно заднюю камеру
          }
        };

        navigator.mediaDevices.getUserMedia(constraints).then(function (stream) {
          video.srcObject = stream;
          video.play();
        }).catch(function (err) {
          console.error("Ошибка доступа к камере: ", err);
          alert("Нужен доступ к камере и HTTPS!");
        });
      }
    </script>
  </body>
</html>